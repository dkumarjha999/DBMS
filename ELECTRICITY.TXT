 DELIMITER #
 CREATE PROCEDURE EBILL(ID INT,CURRENT_READING FLOAT(10,2))
     BEGIN
    DECLARE B VARCHAR(30);
     DECLARE C FLOAT(10,2);
     DECLARE D FLOAT;
     DECLARE LDATE DATE;
     CREATE TEMPORARY TABLE TEMP(ID INT,CNAME VARCHAR(30),LDATE DATE,CUNSUMEDUNIT FLOAT(10,2),CHARGE FLOAT(10,2));
    SET LDATE=DATE_ADD(CURDATE(),INTERVAL 10 DAY);
    SELECT NAME INTO B FROM CONSUMER WHERE ID=CONSUMER.ID;
     SELECT LAST_READING INTO C FROM CONSUMER WHERE ID=CONSUMER.ID;
     SELECT UNIT_PRICE INTO D FROM CONSUMER WHERE ID=CONSUMER.ID;
    INSERT INTO TEMP VALUES(ID,B,LDATE,(CURRENT_READING-C),(CURRENT_READING-C)*D);
     SELECT * FROM TEMP;
     UPDATE CONSUMER SET CONSUMER.CURRENT_READING=CURRENT_READING,CONSUMER.MONTH=MONTH(NOW()) WHERE CONSUMER.ID=ID;
     DROP TABLE TEMP;
    END #

